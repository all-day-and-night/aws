Route 53
============


> DNS 

# 장점

* 가용성과 확장성이 뛰어난 클라우드 기반 DNS 웹 서비스
* 동적으로 사용자에게 노출될 DNS 레코드 타입과 값 조정
* 각종 다양한 로드밸런싱 기능지원 
* 사용자의 요청을 ec, elb, s3 버킷 등 인프라로 직접 연결가능
* 외부의 인프라를 라우팅하는데 사용가능
* Route 53 트래픽 흐름을 사용하면 지연시간기반 라우팅 가능
* Route 53에서는 도메인 이름 등록도 지원 가능

# 호스팅 영역

* 퍼블릭 호스팅 영역

> 인터넷에서 트래픽을 라우팅하고자 하는 방법을 지정하는 레코드

> 브라우저에서 도메인으로 접속해서 사용하는 일반적인 도메인

* 프라이빗 호스팅 영역

> Amazon vpc에서 트래픽을 라우팅하고자 하는 방법을 지정하는 레코드를 포함

> Route 53을 이용하여 지정한 vpc에서 요청한 dns 쿼리 응답을 반환하는 일종의 컨테이너

> 즉 vpc 내 aws 서비스들의 사설 IP대신 도메인으로 이용하고자 할 때 사용하는 영역


# 레코드

* 레코드 이름: 라우팅할 이름을 지정

* 레코드 유형 : dns 레코드를 선택하는 항목 

> ec2로 라우팅 시 ipv4로 라우팅하기 때문에 건들지 않는다.

* 값: 라우팅할 ec2의 ipv4를 입력

> 다른 aws 시소스로 라우팅이 가능한 유형의 경우 별칭을 체크하면 라우팅 가능한 서비스를 선택할 수 있다.

* TTL: dns에 ip주소를 저장할 시간(초), health check 기능을 사용할 경우 aws 에서는 60초 이하를 권장한다.

* 라우팅 정책:

> 단순 - 표준 dns 기능 사용

> 가중치 기반 - 각 리소스에 보낼 트래픽을 지정 가능

> 지리적 위치 - 지정한 위치의 가까운 사용자의 트래픽을 라우팅

> 지연시간 - 지연시간이 가장 짧은 리전으로 트래픽을 라우팅

> 장애조치 - 정상 상태일때만 트래픽을 라우팅

> 다중값 응답 - dns의 loop up 시 ip값을 다중으로 반환하도록 구정


# 1. A record

> dns에 저장되는 정보의 타입으로 도메인 주소와 서버의 ip 주소가 직접 매핑되는 방법

> TTL: time to live / dbs 서버나 사용자 pc의 캐쉬(메모리)에 저장되는 시간


# 2. CNAME(Canonical Name Record)

> 도메인 별명 레코드 / 도메인 주소를 또 다른 도메인 주소로 이중 매핑시키는 형태의 dns 레코드 타입


## A record vs CNAME

* A record

> 한번의 요청으로 찾아갈 서버의 ip 주소를 한번에 알 수 있음

> ip 주소가 자주 바뀌는 환경에서는 조금 번거로울 수 있음

* CNAME

> ip 주소가 자주 변경되는 환경에서 유연하게 대응할 수 있다는 점

> 매핑을 중복으로 연달아 하여 실제 ip 주소를 얻을 때까지 여러 번 dns 정보를 요청해야 한다는 점 -> 성능저하

# 3. MX(Mail Exchanger)

> 메일 서버 레코드 / 해당 도메인과 연동되어 있는 메일서버를 확인하는데 사용하는 레코드

> mx레코드가 해당 도메인에 설정되어 있어야 해당 도메인을 이메일주소로 사용할 수 있다.

# 4. NS(Name Server)

> 도메인에 대한 네임서버의 권한을 누가 관리하고 있는지 알려주는 레코드

> 보통 도메인 판매 업체

# 5. PTP(Pointer)

> IP 주소에 대한 도메인 주소를 확인할 수 있는 레코드

> A record와 반대 방향

# 6. SOA(Start of Authority)

> 네임서버가 해당 도메인에 관하여 인증된 데이터를 가지고 있음을 증명하는 레코드

> 기본 이름 서버, 도메인 관리자의 전자메일, 도메인 일련번호 및 영역 새로 고침과 관련된 여러 타이머를 포함하여 dns영역에 대한 핵심정보 지정

